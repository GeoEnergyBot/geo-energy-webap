# План поэтапной интеграции (Roadmap → Implementation)

## Этап 1 — AR-гейтинг сбора и стабильный HUD (сделано в этом патче)
- Мини-игра **Ghost Catch** (канвас) внутри существующей модалки `#ar-modal`.
- Сбор энергии разрешён только при **успешном прохождении** мини-игры.
- Исправления AR-UI: таймер, прогресс, без дублей кнопок/надписей. Тело скрывается через события `ar:open/close` (уже в проекте).
- Обновление HUD после сбора: уровень, энергия, прогресс-бар, смена иконки игрока.

**Критерии приёмки:**
1. При клике по точке в радиусе ≤20м открывается GhostCatch; при провале — сбор не выполняется.
2. При успехе: анимация «перелёта» энергии + обновление HUD/иконки; точка исчезает.
3. Таймер и шкала видимы; подсказки не дублируются.

## Этап 2 — Баланс и античит v0
- Кулдауны на клики по точкам (≥3s), защита от двойного сбора.
- Хард‑кап энергии/сутки на клиенте (мягкий), логгирование событий на сервере.
- Фильтр «телепортов» по скорости и скачкам.

## Этап 3 — Ежедневки/недели + Путь сезона (оффчейн)
- UI вкладка «Квесты», API-заглушки `/quests`.
- Отслеживание прогресса и награды (Dust/Stamina).

## Этап 4 — Магазин и предметы (оффчейн)
- Каталог: бустеры, люры, VIP.
- Применение эффектов (хранить в `players` → `effects[]`).

## Этап 5 — Люры/горячие зоны
- Локальный буст спавна в радиусе, общий для игроков.

## Этап 6 — Кланы, аномалии, лидерборды
- Базовая клан‑модель и лайв‑ивенты.

## Этап 7 — TON (Фаза 1)
- Кастодиальные кошельки, оффчейн↔ончейн мост $GEO, дневные капы Proof‑of‑Play.


## Этап 2 — реализовано
- Кулдауны (3с) и защита от двойного сбора.
- Мягкий дневной кап на клиенте (1200 + 80 * уровень).
- Античит v0: детекция телепортов/скорости + временное -50% к наградам.
