<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>GeoEnergyBot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- –°—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ + Leaflet -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ú–∏–Ω–∏-—Å—Ç–∏–ª–∏ –¥–ª—è AR-–º–æ–¥–∞–ª–∫–∏ (–ª–æ–∫–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å style.css) -->
  <style>
    /* AR Overlay */
    #ar-modal.hidden { display: none; }
    #ar-modal {
      position: fixed; inset: 0;
      background: #000;
      z-index: 9999;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }
    #ar-header {
      display: flex; justify-content: flex-end; align-items: center;
      padding: 10px;
    }
    #ar-close {
      color: #fff; background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.2);
      border-radius: 10px;
      padding: 8px 12px;
      font-size: 16px;
      cursor: pointer;
      user-select: none;
    }
    #ar-stage {
      position: relative;
      overflow: hidden;
    }
    #ar-video {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      transform: scaleX(-1); /* —Ñ—Ä–æ–Ω—Ç–∞–ª–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π: –æ—Å—Ç–∞–≤–∏–º —Ç–∞–∫ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏ */
    }
    #ar-placeholder {
      position: absolute; left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      width: min(45vw, 280px);
      aspect-ratio: 1/1;
      border-radius: 18%;
      background:
        radial-gradient(60% 60% at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.2)),
        radial-gradient(55% 55% at 70% 70%, rgba(0,200,255,.5), rgba(0,0,0,.0));
      border: 2px solid rgba(255,255,255,.4);
      box-shadow: 0 12px 40px rgba(0,0,0,.55), inset 0 0 18px rgba(0,200,255,.35);
      display: grid; place-items: center;
      animation: floaty 2.4s ease-in-out infinite;
    }
    #ar-placeholder::after {
      content: "üëæ";
      font-size: clamp(56px, 12vw, 100px);
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.45));
    }
    @keyframes floaty {
      0% { transform: translate(-50%, -50%) translateY(0); }
      50% { transform: translate(-50%, -50%) translateY(-10px); }
      100% { transform: translate(-50%, -50%) translateY(0); }
    }

    #ar-actions {
      display: grid; place-items: center;
      padding: 14px;
      gap: 10px;
      background: linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.35));
      border-top: 1px solid rgba(255,255,255,.08);
    }
    #catch-btn {
      appearance: none; border: none; outline: none;
      background: linear-gradient(90deg, #00ffcc, #00bfff, #0077ff);
      color: #00131a; font-weight: 800; letter-spacing: .2px;
      padding: 12px 18px; border-radius: 999px; cursor: pointer;
      box-shadow: 0 6px 24px rgba(0, 153, 255, .35);
      font-size: 16px;
    }
    #catch-hint {
      color: #cfefff; font-size: 12px; opacity: .8;
    }
  </style>
</head>
<body>

  <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <div id="top-bar">
    <div id="player-icon">
      <img id="avatar" src="https://via.placeholder.com/48" alt="avatar">
      <div id="level-badge">1</div>
    </div>
    <div id="player-info">
      <div id="username">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      <div id="energy-info"><span id="energy-value">0</span> / <span id="energy-max">1000</span></div>
      <div id="energy-bar-container">
        <div id="energy-bar-fill"></div>
      </div>
    </div>
  </div>

  <!-- –ö–∞—Ä—Ç–∞ -->
  <div id="map"></div>

  <!-- AR-–º–æ–¥–∞–ª–∫–∞ -->
  <div id="ar-modal" class="hidden" role="dialog" aria-label="AR —Ä–µ–∂–∏–º">
    <div id="ar-header">
      <div id="ar-close" title="–ó–∞–∫—Ä—ã—Ç—å">–ó–∞–∫—Ä—ã—Ç—å ‚úï</div>
    </div>
    <div id="ar-stage">
      <video id="ar-video" autoplay playsinline muted></video>
      <!-- –ó–∞–≥–ª—É—à–∫–∞ ¬´—Å—É—â–µ—Å—Ç–≤–æ¬ª -->
      <div id="ar-placeholder" title="–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å"></div>
    </div>
    <div id="ar-actions">
      <button id="catch-btn">–ü–æ–π–º–∞—Ç—å</button>
      <div id="catch-hint">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–π–º–∞—Ç—å¬ª</div>
    </div>
  </div>

  <!-- Leaflet + –≤–∞—à –º–æ–¥—É–ª—å -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script type="module" src="main.js"></script>

  <!-- –ó–≤—É–∫ —Å–±–æ—Ä–∞ -->
  <audio id="energy-sound" src="sounds/pickup.mp3" preload="auto"></audio>
</body>
</html>
